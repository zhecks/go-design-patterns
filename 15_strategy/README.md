# strategy

## 定义

定义一系列的算法，把它们一个个封装起来，并且使它们可相互替换。本模式使得算法可独立于使用它的客户而变化

![image-20230818143508789](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308181435951.png)

## 优缺点

策略模式有以下优点

* 定义一系列算法

策略模式的功能就是定义一系列算法，实现让这些算法可以相互替换。所以会为这一系列算法定义公共的接口，以约束一系列算法要实现的功能。如果这一系列算法具有公共功能，可以把策略接口实现成为抽象类，把这些公共功能实现到父类（golang没有动态绑定）

* 避免多重条件语句

策略模式的一系列策略算法是平等的，是可以互换的，写在一起就是通过if-else结构来组织，如果此时具体的算法实现中又有条件语句，就构成了多重条件语句，使用策略模式能避免这样的多重条件语句

* 更好的扩展性

在策略模式中扩展新的策略实现非常容易，只要增加新的策略实现类，然后在使用策略的地方选择使用这个新的策略实现就可以了

策略模式有以下缺点

* 客户必须了解每种策略的不同

策略模式也有缺点，比如让客户端来选择具体使用哪个策略，这就需要客户了解所有的策略，还要了解各种策略的功能和不同，这样才能做出正确的选择，而且这样也暴露了策略的具体实现

* 增加了对象数目

由于策略模式把每个具体的策略实现都封装成为类，如果备选的策略很多的话，那么对象的数据就会很可观

* 只适合扁平的算法结构

策略模式的一系列算法地位是平等的，是可以相互替换的，事实上构成了一个扁平的算法结构，也就是在一个策略接口下，有多个平等的策略算法，就相当于兄弟算法。而且在运行时刻只有一个算法被使用，这就限制了算法使用的层级，使用的时候不能嵌套使用

## 思考

1. 策略模式的本质

策略模式的本质：分离算法，选择实现

ps：本质是将具体的算法变成具体的实现类，通过选择实现类来实现算法的选择

2. 何时选用策略模式

* 出现有许多相关的类，仅仅是行为有差别的情况下，可以使用策略模式来使用多个行为中的一个来配置一个类的方法，实现算法动态切换
* 出现同一个算法，有很多不同实现的情况下，可以使用策略模式来把这些“不同的实现”实现成为一个算法的类层次
* 需要封装算法中，有与算法相关数据的情况下，可以使用策略模式来避免暴露这些跟算法相关的数据结构
* 出现抽象一个定义了很多行为的类，并且是通过多个if-else语句来选择这些行为的情况，可以使用策略模式来代理这些条件语句