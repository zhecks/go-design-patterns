# composite

## 定义

将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性

ps：将组合对象（枝干对象）和叶子对象的使用方式统一

![image-20230817171346406](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308171713477.png)

![image-20230817171404334](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308171714618.png)

## 优缺点

组合模式有以下优点

* 定义了包含基本对象和组合对象的类层次结构

在组合模式中，基本对象可以被组合成复杂的组合对象，而组合对象又可以组合成更复杂的组合对象，可以不断地递归组合下去，从而构成一个统一的组合对象的类层次结构

* 统一了组合对象和叶子对象

在组合模式中，可以把叶子对象当作特殊的组合对象看待，为他们定义统一的父类，从而把组合对象和叶子对象的行为统一起来

* 简化了客户端调用

组合模式通过统一组合对象和叶子对象，使得客户端在使用他们的时候，不需要再区区分它们，客户不关心使用的到底是什么类型的对象，这就大大简化了客户端的使用

* 更容易扩展

由于客户端是统一地面对Component来操作，因此，新定义的Composite或Leaf子类能够很容易地与已有的结构一起工作，而客户端不需要为增添了新的组件类而改变

组合模式有以下缺点

很难限制组合中的组件类型

ps：只要符合Component接口就能被组合，但有时候随意组合会带来问题，因此需要在运行期间动态检测

## 思考

1. 组合模式的本质

组合模式的本质：统一叶子对象和组合对象

2. 何时选用组合模式

* 如果你想表示对象的部分---整体层次结构，可以选用泽合模式，把整体和部分的操作统一起来，使得层次结构实现更简单，从外部来使用这个层次结构也容易
* 如果你希望统一地使用组合结构中的所有对象，可以选择组合模式，这正式组合模式提供的主要功能

ps：使用的场景比较局限，统一使用的遍历要求肯定的是对外（例如：sdk），同时还要求是组合结构