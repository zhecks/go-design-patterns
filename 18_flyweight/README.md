# flyweight

## 定义

通过共享技术有效地支持大量细粒度的对象

ps：减少大量重复数据带来的内存消耗

ps：共享就通过**单例模式**，不共享直接**new**

ps：如果所有的数据都需要共享，那么就会直接退化成单例模式

![image-20230818170034498](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308181700365.png)

## 优缺点

享元模式的优点：

* 减少对象数量，节省内存空间

享元模式的缺点

* 维护共享对象，需要额外开销

## 思考

1. 享元模式的本质

享元模式的本质：分离与共享

ps：将可以共享的部分共享，减少内存消耗

2. 何时选用享元模式

* 如果一个应用程序使用了大量的细粒度对象，可以使用下个原模式来减少对象数量
* 如果由于使用大量的对象，造成很大的存储开销，可以使用享元模式来减少对象数量，并节约内存
* 如果对象的大多数状态都可以转变位外部状态，比如通过计算得到，或是从外部传入登，可以使用享元模式来实现内部状态和外部状态的分离
* 如果不考虑对象的外部状态，可以用相对较少的共享对象取代很多组合对象，可以使用享元模式来共享对象，然后组合对象来使用这些共享对象