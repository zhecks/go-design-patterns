# template method

## 定义

定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以部改变一个算法的结构即可重定义该算法的某些特定步骤

ps：golang没有类似java的动态绑定机制，因此需要通过匿名组合类来覆盖具体的函数调用

ps：如果父类具有方法A和方法B，方法B是调用父类的方法A，子类重写方法A，此时子类调用B方法，B方法内部还是调用父类的A方法

![image-20230817193857448](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308171939323.png)

## 优缺点

模板方法模式的优点

* 实现代码复用

模板方法模式是一种实现代码复用的很好的手段。通过把子类的公共功能提炼和抽取，把公共部分放到模板中取实现

模板方法模式的缺点

* 算法骨架不容易升级

模板方法模式是最基本的功能就是通过模板的指定，把算法完全固定下来。事实上模板和子类是非常耦合的，如果要对模板中的算法骨架进行变更，可能就会要求所有相关的子类进行相应的变化。所以抽取算法骨架的时候要特别小心，尽量确保是不会变化的部分才放到模板中

## 思考

1. 模板方法模式的本质

模板方法模式的本质：固定算法骨架

2. 何时选用模板方法模式

* 需要固定定义算法骨架，实现一个算法的不变的部分，并把可变的行为留给子类来实现的情况
* 各个子类中具有公共行为，应该抽取出来，集中在一个公共类中取实现，从而避免代码重复
* 需要控制子类扩展的情况。模板方法模式会在特定的点来调用子类的方法，这样只允许在这些点进行扩展