# abstract factory

## 定义

提供一个创建一系列相关或互相依赖对象的接口，而无需制定他们具体的类

![](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308162141988.png)

![](https://cdn.jsdelivr.net/gh/zhecks/static_resources/images/202308162141411.png)

ps：跟工厂方法模式的区别在与工厂方法模式只关注单个产品对象的创建，抽象工厂模式关注一系列产品

ps：其实本质是一种东西，并且抽象工厂模式这个名称就很让人引起歧义，工厂方法中的工厂类难道不是抽象类吗？

## 优缺点

抽象工厂模式的优点

* 分离接口和实现

跟工厂方法模式一样

* 使得切换产品簇变得更容易

因为一个具体的工厂实现代表的是一个产品簇，客户端选用不同的工厂实现，就相当于是在切换不同的产品簇

抽象工厂模式的缺点

* 不太容易扩展新的产品

如果需要给整个产品簇添加一个新的产品（没有采用扩展工厂），那么就需要修改抽象工厂方法，增加一个新的方法。这样就会导致所有抽象工厂的实现类都增加这个方法。采用扩展工厂可以解决这个问题，但是又不够安全。如何选择，则要根据实际应用来权衡

* 容易造成类层次复杂

在使用抽象工厂模式的时候，如果需要选择的层次过多，那么会造成整个类层次变得复杂

ps：不管采不采用抽象工厂方法其实都可能会有这个问题，这时一个既定事实，只是抽象工厂模式没有解决这个问题

## 思考

1. 抽象工厂模式的本质

抽象工厂模式的本质：选择产品簇的实现

2. 何时选用抽象工厂模式

* 如果希望一个系统独立于它的产品的创建、组合和表示的时候。（解耦）
* 如果一个系统要由多个产品系列中的一个来配置的时候
* 如果要强调一系列相关产品的接口，以便联合使用它们的时候